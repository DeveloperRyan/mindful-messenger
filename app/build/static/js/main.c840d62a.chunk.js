(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{151:function(e,t,n){},157:function(e,t,n){var a={"./add_chat.svg":158,"./back_arrow.svg":43,"./menu_icon.svg":44,"./send_icon.svg":45};function s(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=r,e.exports=s,s.id=157},158:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/add_chat.12a02b77.svg"},187:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(42),i=n.n(r),c=(n(98),n(93)),o=n(18),u=n(2),h=n(3),d=n(21),l=n(5),p=n(4),j=n(16),m=n(6),b=n(82),v=n.n(b),O=n(83),f=n.n(O),g=n(92),x=n(84),_=(n(151),n(30)),C=n.n(_),y=n(43),N=n(44),k=n(0),w=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{children:Object(k.jsxs)("div",{className:C.a.container,children:[Object(k.jsxs)("div",{className:C.a["left-elements"],children:[Object(k.jsx)(j.b,{to:"/",children:Object(k.jsx)("img",{src:y.default,alt:"",width:"15px",height:"15px"})}),Object(k.jsx)("h1",{className:C.a.header+" ml-20",children:this.props.text})]}),Object(k.jsx)(j.b,{to:"#",children:Object(k.jsx)("img",{src:N.default,alt:"",width:"15px",height:"15px"})})]})})}}]),n}(a.Component),S=n(48),E=n.n(S),D=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.sender!=this.props.viewer?E.a["message-container-receiver"]:E.a["message-container-sender"];return Object(k.jsx)("div",{className:e,children:Object(k.jsx)("p",{children:this.props.content})})}}]),n}(a.Component),M=n(86),T=n.n(M),A=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:T.a.container,children:this.renderMessages()})}},{key:"renderMessages",value:function(){var e=this;return this.props.messages.map((function(t){return Object(k.jsx)(D,{viewer:e.props.viewer,content:t.message,sender:t.sender},t.id)}))}}]),n}(a.Component),P=n(49),I=n.n(P),U=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:I.a.container,children:Object(k.jsx)("textarea",{value:this.props.value,onChange:this.props.onChange,className:I.a["message-input"],placeholder:"Type something..."})})}}]),n}(a.Component),B=n(87),F=n.n(B),R=n(45),G=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:F.a.container,onClick:this.props.onSend,children:Object(k.jsx)("img",{src:R.default,alt:"",width:"16px",height:"16px"})})}}]),n}(a.Component),H=n(88),J=n.n(H),z=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:J.a.container,children:[Object(k.jsx)(U,{onChange:this.props.onChange,value:this.props.value}),Object(k.jsx)(G,{onSend:this.props.onSend})]})}}]),n}(a.Component),V=n(89),X=n.n(V),W=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={message:""},a.handleSend=a.handleSend.bind(Object(d.a)(a)),a.handleChange=a.handleChange.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"handleChange",value:function(e){this.setState({message:e.target.value})}},{key:"handleSend",value:function(){this.props.onSend({target:this.props.match.params.target,message:this.state.message,epoch:Date.now()}),this.setState({message:""})}},{key:"messageFilter",value:function(e){return e.sender==this.props.viewer||e.sender==this.props.match.params.target}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:X.a.container,children:[Object(k.jsx)(w,{text:this.props.match.params.target}),Object(k.jsx)(A,{messages:this.props.messages.filter((function(t){return e.messageFilter(t)})),viewer:this.props.viewer}),Object(k.jsx)(z,{onSend:this.handleSend,onChange:this.handleChange,value:this.state.message})]})}}]),n}(a.Component),q=n(50),L=n.n(q),Q=n(157),K=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.image?Object(k.jsx)("img",{src:Q("./".concat(this.props.image,".svg")).default,alt:"",width:"13px",height:"13px"}):"";return Object(k.jsxs)("div",{className:L.a.container,children:[Object(k.jsx)("h1",{className:L.a.header,children:this.props.text}),Object(k.jsx)(j.b,{to:this.props.route,children:e})]})}}]),n}(a.Component),Y=n(23),Z=n.n(Y),$=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e="".concat(Z.a["chat-container"]," p-10"),t="".concat(Z.a["profile-image"]," w-50 h-50 br-100 mr-20"),n="".concat(Z.a["text-container"]),a="".concat(Z.a["chat-name"]," text-gray-darker font-medium"),s="".concat(Z.a["message-preview"]," text-gray-regular");return Object(k.jsxs)("div",{className:e,children:[Object(k.jsx)("img",{src:this.props.imageUrl,alt:"",className:t}),Object(k.jsxs)("div",{className:n,children:[Object(k.jsx)("p",{className:a,children:this.props.name}),Object(k.jsx)("p",{className:s,children:this.props.preview})]})]})}}]),n}(a.Component),ee=n(51),te=n.n(ee),ne=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:te.a.container,children:this.addChats()})}},{key:"addChats",value:function(){return this.props.chats.map((function(e){return Object(k.jsx)(j.b,{to:"/messages/"+e.name,style:te.a.link,children:Object(k.jsx)($,{name:e.name,preview:e.preview,imageUrl:e.imageUrl},e.id)})}))}}]),n}(a.Component),ae=n(90),se=n.n(ae),re=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:se.a.container,children:[Object(k.jsx)(K,{text:"Chats",image:"add_chat",route:"/compose"}),Object(k.jsx)(ne,{chats:this.props.chats})]})}}]),n}(a.Component),ie=n(91),ce=n.n(ie),oe=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={target:"",redirect:null},a}return Object(h.a)(n,[{key:"handleConnect",value:function(){this.props.onConnect(this.state.target),this.setState({redirect:"/messages/"+this.state.target})}},{key:"handleChange",value:function(e){this.setState({target:e.target.value})}},{key:"render",value:function(){return this.state.redirect?Object(k.jsx)(m.a,{to:this.state.redirect}):Object(k.jsxs)("div",{className:ce.a.container,children:[Object(k.jsx)(w,{text:"Example Compose"}),Object(k.jsx)(z,{onSend:this.handleConnect.bind(this),onChange:this.handleChange.bind(this),value:this.state.target})]})}}]),n}(a.Component),ue=n(24),he=n.n(ue),de=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:he.a.container+" text-gray-darker",children:[Object(k.jsx)("h1",{className:"font-medium font-size-medium",children:"Create Event"}),Object(k.jsxs)("div",{className:he.a["event-container"],children:[Object(k.jsxs)("p",{children:[Object(k.jsx)("span",{className:"font-medium",children:"Name: "}),this.props.eventName]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("span",{className:"font-medium",children:"Date: "}),this.props.eventDate]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("span",{className:"font-medium",children:"Time: "}),this.props.eventTime]})]}),Object(k.jsxs)("div",{className:he.a["button-container"],children:[Object(k.jsx)("button",{className:he.a["button-large"],onClick:this.props.onAccept,children:"Add Event"}),Object(k.jsx)("button",{className:he.a["button-small"],onClick:this.props.onDeny,children:"No Thanks"})]})]})}}]),n}(a.Component),le=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={username:"testUser",socket:v()("http://localhost:8000"),chats:[],messages:[],popup:!1,eventName:"",eventDate:""},n.state.socket.on("private_message",(function(e){n.addMessage(e),console.log(e),n.updateChat(e,e.sender),n.sendToGPT3(e)})),window.app=Object(d.a)(n),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=prompt("Please enter your username");this.setState((function(n){return Object(o.a)(Object(o.a)({},e.state),{},{username:t})}),(function(){return e.identify()}))}},{key:"identify",value:function(){this.state.socket.emit("identify",{username:this.state.username})}},{key:"addChat",value:function(e){var t=this.state.chats.concat(e);this.setState({chats:t})}},{key:"updateChat",value:function(e,t){for(var n,a=this.state.messages.length-1;a>=0;a--)if(this.state.messages[a].sender==e.sender){n=this.state.messages[a].message;break}var s={name:t,imageUrl:"https://ui-avatars.com/api/?name="+t,preview:n,id:t};var r=function(e,t){for(var n=0;n<t.length;n++)if(t[n].name==e.name)return n;return-1}(s,this.state.chats);-1==r?this.addChat(s):this.updateChatContents(r,s)}},{key:"updateChatContents",value:function(e,t){var n=Object(c.a)(this.state.chats);n[e]=t,this.setState({chats:n})}},{key:"addMessage",value:function(e){e.sender||(e.sender=this.state.username);var t=this.state.messages.concat(e);this.setState({messages:t})}},{key:"sendMessage",value:function(e){this.state.socket.emit("private_message",e),this.addMessage(e),this.updateChat(e,e.target)}},{key:"sendToGPT3",value:function(e){var t=this;f.a.post("http://localhost:4242/reminder/",{sender:e.sender,epoch:e.epoch,text:e.message}).then((function(e){console.log(e.data),"Event"==e.data.eventType&&t.setState({popup:!0,eventName:e.data.title,eventDate:e.data.date})})).catch((function(e){console.log(e)}))}},{key:"handleOnAcceptEvent",value:function(){console.log("event added"),this.createCalendarEvent(),this.closePopup()}},{key:"handleOnDenyEvent",value:function(){console.log("event rejected"),this.closePopup()}},{key:"closePopup",value:function(){this.setState({popup:!1,eventName:"",eventDate:""})}},{key:"handleConnect",value:function(e){var t={name:e,imageUrl:"https://ui-avatars.com/api/?name="+e,preview:"",id:e};this.addChat(t)}},{key:"createCalendarEvent",value:function(){n(159).createEvent({start:[2018,5,30,6,30],duration:{hours:6,minutes:30},title:"Bolder Boulder",description:"Annual 10-kilometer run in Boulder, Colorado",location:"Folsom Field, University of Colorado (finish line)",url:"http://www.bolderboulder.com/",geo:{lat:40.0095,lon:105.2669},categories:["10k races","Memorial Day Weekend","Boulder CO"],status:"CONFIRMED",busyStatus:"BUSY",organizer:{name:"Admin",email:"Race@BolderBOULDER.com"},attendees:[{name:"Adam Gibbons",email:"adam@example.com",rsvp:!0,partstat:"ACCEPTED",role:"REQ-PARTICIPANT"},{name:"Brittany Seaton",email:"brittany@example2.org",dir:"https://linkedin.com/in/brittanyseaton",role:"OPT-PARTICIPANT"}]},(function(e,t){e?console.log(e):(console.log(t),Object(x.save)(t.toString(),"event.ics"))}))}},{key:"render",value:function(){var e=this;return Object(k.jsx)(j.a,{children:Object(k.jsxs)("div",{className:"App",children:[Object(k.jsxs)(m.d,{children:[Object(k.jsx)(m.b,{path:"/compose",render:function(t){return Object(k.jsx)(oe,Object(o.a)(Object(o.a)({},t),{},{onConnect:e.handleConnect.bind(e)}))}}),Object(k.jsx)(m.b,{path:"/messages/:target",render:function(t){return Object(k.jsx)(W,Object(o.a)(Object(o.a)({},t),{},{messages:e.state.messages,viewer:e.state.username,onSend:e.sendMessage.bind(e)}))}}),Object(k.jsx)(m.b,{path:"/",render:function(t){return Object(k.jsx)(re,Object(o.a)(Object(o.a)({},t),{},{chats:e.state.chats}))}})]}),this.state.popup?Object(k.jsx)(g.Spring,{from:{top:"100vh",width:"100%",position:"fixed"},to:{top:"65vh",position:"fixed"},children:function(t){return Object(k.jsx)("div",{style:t,children:Object(k.jsx)(de,{eventName:e.state.eventName,eventDate:e.state.eventDate,onAccept:e.handleOnAcceptEvent.bind(e),onDeny:e.handleOnDenyEvent.bind(e)})})}}):null]})})}}]),a}(a.Component);i.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(le,{})}),document.getElementById("root"))},23:function(e,t,n){e.exports={"chat-container":"Chat_chat-container__1uIb4","text-container":"Chat_text-container__XpuE7","profile-image":"Chat_profile-image__2zj9m","chat-name":"Chat_chat-name__1N8Zc","message-preview":"Chat_message-preview__1DJRC"}},24:function(e,t,n){e.exports={container:"NewEventNotification_container__1QCU-","event-container":"NewEventNotification_event-container__1iwwF","button-container":"NewEventNotification_button-container__GuPJq","button-large":"NewEventNotification_button-large__2Xy0s","button-small":"NewEventNotification_button-small__1cDbl"}},30:function(e,t,n){e.exports={container:"NavigationHeader_container__2WkF0",header:"NavigationHeader_header__3FMuK","left-elements":"NavigationHeader_left-elements__1TA9s"}},43:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/back_arrow.c0b41308.svg"},44:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/menu_icon.244a3bf9.svg"},45:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/send_icon.bcad12c8.svg"},48:function(e,t,n){e.exports={"message-container-sender":"Message_message-container-sender__3xC-c","message-container-receiver":"Message_message-container-receiver__1-gqf"}},49:function(e,t,n){e.exports={container:"MessageInput_container__3j6dk","message-input":"MessageInput_message-input__25I9R","send-button":"MessageInput_send-button__XvRlV"}},50:function(e,t,n){e.exports={container:"GenericHeader_container__2T49_",header:"GenericHeader_header__1aNjT"}},51:function(e,t,n){e.exports={container:"ChatsContainer_container__2PvwX"}},86:function(e,t,n){e.exports={container:"MessagesContainer_container__3s5nW"}},87:function(e,t,n){e.exports={container:"SendButton_container__2rg8u"}},88:function(e,t,n){e.exports={container:"InputContainer_container__2sNT1"}},89:function(e,t,n){e.exports={container:"MessageView_container__3A8o4"}},90:function(e,t,n){e.exports={container:"ChatsView_container__2Dz0x"}},91:function(e,t,n){e.exports={container:"ComposeChatView_container__2BA3J"}},98:function(e,t,n){}},[[187,1,2]]]);
//# sourceMappingURL=main.c840d62a.chunk.js.map